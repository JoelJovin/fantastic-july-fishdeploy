<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="../../css/homepage/login.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
            rel="stylesheet">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
            integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
            crossorigin="anonymous" referrerpolicy="no-referrer">

        <title>signup</title>
    </head>

    <body>
        <div class="container">
            <a href="../../../index.html"><img  style="top:20px" src="../../img/logo.jpg" alt=""></a>

            <div class="container-form" style="top:30px">

                <div class="x-mark">
                    <a href="../../../index.html">
                        <i class="fa-solid fa-xmark"></i>
                    </a>
                </div>

                <h2>Create Account</h2>

                <form action="/signup" method="POST" role="form" onsubmit="signUp(event)" id="signup">

                    <div class="form-control">
                        <label class="label_field">full name</label>
                        <br >
                        <input class="input_field" id="full_name" type="text" placeholder="Eg.Marion ame"  value="Marion"> 
                        <small></small>
                    </div>

                    <div class="form-control">
                        <label class="label_field">Email address</label>
                        <br >
                        <input class="input_field" id="email" type="email" placeholder="Eg.helloMarion@gmail.com" value="marion007@gmail.com">
                        <small></small>

                    </div>

                    <div class="form-control ">
                        <label class="label_field">Mobile number</label>
                        <br >
                        <input class="input_field" id="mobile_number" type="tel" placeholder="Mobile number" value="9789853625">
                        <small></small>
                    </div>

                    <div class="form-control">
                        <label class="label_field">Password </label>
                        <br >
                        <input class="input_field" type="password" id="password" placeholder="password" maxlength="6"
                            title="Must contain 6 characters only"  value="978985">
                        <i id="togglePassword" class="fa-solid fa-eye"></i>
                        <small></small>
                    </div>

                    <div class="form-control">
                        <label class="label_field">Re-enter password</label>
                        <br >
                        <input class="input_field" type="password" id="re_enter_password" placeholder="Re-enter password" maxlength="6" value="978985">
                        <small></small>

                    </div>

                    <div class="buttons">
                        <div>
                            <button type="submit">Create Your Account
                            </button>
                        </div>

                        <div>
                            <span>Already have an account?</span>
                            <a href="../../pages/homepage/login.html">Log in</a>
                        </div>
                    </div>

                </form>

            </div>

        </div>
        <script>
             document.addEventListener("DOMContentLoaded", function() {
    document.querySelector("#togglePassword").addEventListener("click", showpsw);

    function showpsw() {
      if (document.querySelector("#password").type === "password") {
        document.querySelector("#password").type = "text";
      } else {
        document.querySelector("#password").type = "password";
      }
    }
    function signUp(e) {
  e.preventDefault();

  const full_name = document.getElementById("full_name").value.trim();
  const email = document.getElementById("email").value.trim();
  const mobile_number = document.getElementById("mobile_number").value.trim();
  const password = document.getElementById("password").value.trim();

  const user = {
      full_name: full_name,
      email: email,
      mobile_number: mobile_number,
      password: password,
      is_active:0,
      is_delete:0
  };
console.log(user);
  fetch('/signup', {
      method: 'POST',
      headers: {
          'Content-Type': 'application/json'
      },
      body: JSON.stringify(user)
  })
  .then(response => {
      if (!response.ok) {
          throw new Error('Network response was not ok');
      }
      return response.json();
  })
  .then(data => {
      if (data.success) {
          alert('User signed up successfully!');
        //   window.location.href = 'assets/pages/homepage/login.html'; 
        window.location.href = 'http://localhost:3000/login'; 
      } else {
          alert('Error: ' + data.error);
      }
  })
  .catch(error => {
      console.error('Error:', error);
  });
}

document.getElementById("signup").addEventListener("submit", signUp);
             });
</script>
<!-- <script src="../../js/profile/signup.js"></script> -->
    </body>

</html>